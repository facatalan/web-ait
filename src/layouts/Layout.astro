---
// Self-hosted Inter font (eliminates render-blocking Google Fonts)
import '@fontsource/inter/300.css';
import '@fontsource/inter/400.css';
import '@fontsource/inter/500.css';
import '@fontsource/inter/600.css';
import '@fontsource/inter/700.css';
import '@fontsource/inter/800.css';

interface Props {
  title: string;
  description?: string;
  ogTitle?: string;
  ogDescription?: string;
  ogImage?: string;
  ogType?: 'website' | 'article';
  canonical?: string;
  keywords?: string[];
  author?: string;
  article?: {
    publishedTime: string;
    modifiedTime?: string;
    author: string;
    section: string;
    tags: string[];
  };
}

const {
  title,
  description,
  ogTitle,
  ogDescription,
  ogImage,
  ogType = 'website',
  canonical,
  keywords,
  author = 'Felipe Catalán',
  article
} = Astro.props;

// Valores por defecto para backward compatibility
const defaultDescription = "Aprende a amplificar tu experiencia profesional con IA. Recupera 8 horas productivas por semana. Sistema estratégico en 6 semanas, no trucos técnicos.";
const defaultKeywords = "inteligencia artificial profesional, ChatGPT avanzado, Claude AI, productividad con IA, amplificación cognitiva, sistema estratégico IA, pensar con IA, AI para ejecutivos";
const defaultOgTitle = "AI Thinking - El sistema que amplifica tu experiencia con IA";
const defaultOgDescription = "Más de 250 profesionales senior en 12 países han recuperado un promedio de 8 horas productivas por semana. El método que convierte tu experiencia en ventaja estratégica con IA.";
const defaultOgImage = "https://ai-thinking.io/images/og-image.jpg";
const defaultCanonical = "https://ai-thinking.io/";

// Usar props si existen, sino usar valores por defecto
const metaDescription = description || defaultDescription;
const metaKeywords = keywords?.join(', ') || defaultKeywords;
const metaOgTitle = ogTitle || defaultOgTitle;
const metaOgDescription = ogDescription || defaultOgDescription;
const metaOgImage = ogImage || defaultOgImage;
const metaCanonical = canonical || defaultCanonical;
---

<!doctype html>
<html lang="es">
  <head>
    <!-- Metadatos básicos -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <meta name="description" content={metaDescription}>
    <meta name="keywords" content={metaKeywords}>
    <meta name="author" content={author}>
    <meta name="robots" content="index, follow">
    <link rel="canonical" href={metaCanonical}>

    <!-- Open Graph / Facebook / WhatsApp / LinkedIn -->
    <meta property="og:type" content={ogType}>
    <meta property="og:url" content={metaCanonical}>
    <meta property="og:site_name" content="AI Thinking">
    <meta property="og:title" content={metaOgTitle}>
    <meta property="og:description" content={metaOgDescription}>
    <meta property="og:image" content={metaOgImage}>
    <meta property="og:image:secure_url" content={metaOgImage}>
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content={metaOgTitle}>
    <meta property="og:locale" content="es_ES">
    <meta property="og:locale:alternate" content="es_MX">
    <meta property="og:locale:alternate" content="es_AR">
    <meta property="og:locale:alternate" content="es_CL">
    {article && (
      <>
        <meta property="article:published_time" content={article.publishedTime}>
        {article.modifiedTime && <meta property="article:modified_time" content={article.modifiedTime}>}
        <meta property="article:author" content={article.author}>
        <meta property="article:section" content={article.section}>
        {article.tags.map(tag => <meta property="article:tag" content={tag}>)}
      </>
    )}

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content={metaCanonical}>
    <meta name="twitter:title" content={metaOgTitle}>
    <meta name="twitter:description" content={metaOgDescription}>
    <meta name="twitter:image" content={metaOgImage}>
    <meta name="twitter:image:alt" content={metaOgTitle}>
    <meta name="twitter:creator" content="@felipecatalan">
    <meta name="twitter:site" content="@aithinking">

    <!-- Schema.org JSON-LD para SEO avanzado -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Course",
      "name": "AI Thinking",
      "description": "Sistema estratégico de amplificación cognitiva con Inteligencia Artificial para profesionales senior. Más de 250 profesionales en 12 países y +20 industrias han transformado su forma de trabajar con IA.",
      "provider": {
        "@type": "Organization",
        "name": "AI Thinking",
        "url": "https://ai-thinking.io",
        "logo": "https://ai-thinking.io/images/logo.png"
      },
      "instructor": {
        "@type": "Person",
        "name": "Felipe Catalán",
        "description": "Consultor especializado en la intersección entre tecnología y estrategia de negocios, con casi 20 años de experiencia",
        "url": "https://ai-thinking.io"
      },
      "educationalLevel": "Advanced",
      "timeRequired": "P6W",
      "courseMode": "online",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "250",
        "bestRating": "5"
      },
      "offers": {
        "@type": "Offer",
        "availability": "https://schema.org/InStock",
        "url": "https://ai-thinking.io",
        "priceCurrency": "USD"
      }
    }
    </script>

    <!-- Schema.org para Organización -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "AI Thinking",
      "url": "https://ai-thinking.io",
      "logo": "https://ai-thinking.io/images/logo.png",
      "description": "Sistema estratégico de amplificación cognitiva con Inteligencia Artificial",
      "sameAs": [
        "https://twitter.com/aithinking",
        "https://linkedin.com/company/aithinking",
        "https://instagram.com/aithinking"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "Customer Service",
        "email": "contacto@ai-thinking.io",
        "availableLanguage": ["Spanish", "English"]
      }
    }
    </script>

    <!-- Schema.org para BlogPosting (condicional para artículos de blog) -->
    {article && (
      <script type="application/ld+json" set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": title,
        "datePublished": article.publishedTime,
        ...(article.modifiedTime && { "dateModified": article.modifiedTime }),
        "author": {
          "@type": "Person",
          "name": article.author
        },
        "publisher": {
          "@type": "Organization",
          "name": "AI Thinking",
          "logo": {
            "@type": "ImageObject",
            "url": "https://ai-thinking.io/images/logo.png"
          }
        },
        ...(metaOgImage && { "image": metaOgImage }),
        "articleSection": article.section,
        ...(article.tags.length > 0 && { "keywords": article.tags.join(', ') })
      })} />
    )}

    <!-- Adicionales para SEO -->
    <meta name="theme-color" content="#4F46E5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AI Thinking">

    <!-- Font Inter loaded via @fontsource (self-hosted, no render-blocking) -->

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-81R01RZSGV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-81R01RZSGV');
    </script>
  </head>
  <body class="bg-dark-900 text-white font-sans antialiased">
    <slot />
  </body>
</html>

<style is:global>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    min-height: 100vh;
  }

  .gradient-text {
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .gradient-border {
    position: relative;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6, #06b6d4);
    padding: 1px;
    border-radius: 0.5rem;
  }

  .gradient-border > * {
    background: #12121a;
    border-radius: 0.5rem;
  }

  .glow {
    box-shadow: 0 0 40px rgba(59, 130, 246, 0.3);
  }

  /* Texto monoespaciado más compacto en prose */
  .prose pre,
  .prose code {
    line-height: 1.3;
  }
</style>
